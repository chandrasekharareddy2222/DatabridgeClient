<div class="members-page">
  <div class="card">
    <p-toast></p-toast>
    <p-confirmDialog></p-confirmDialog>

    <!-- Toolbar -->
    <p-toolbar styleClass="mb-4">
      <ng-template pTemplate="left">
        <h2 class="m-0">Members Management</h2>
      </ng-template>

      <ng-template pTemplate="right">
        <p-button
          severity="success"
          label="New Member"
          icon="pi pi-plus"
          (onClick)="openNew()">
        </p-button>
      </ng-template>
    </p-toolbar>

    <!-- Members Table -->
    <p-table
      [value]="members()"
      dataKey="memberId"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5,10,20]"
      [tableStyle]="{ 'min-width': '45rem' }">

      <ng-template pTemplate="header">
  <tr>
    <th pSortableColumn="memberid">
      Member ID <p-sortIcon field="memberid"></p-sortIcon>
    </th>
    <th>Book Name</th>
    <th>Member Name</th>
    <th>Age</th>
    <th>Actions</th>
  </tr>
</ng-template>

      <ng-template pTemplate="body" let-member>
        <tr>
          <td>{{ member.memberid }}</td>
          <td>{{ member.bookname }}</td>
          <td>{{ member.memberName }}</td>
          <td>{{ member.memberAge }}</td>
          <td>
            <p-button
              icon="pi pi-pencil"
              severity="warn"
              [text]="true"
              (onClick)="editMember(member)">
            </p-button>

            <p-button
              icon="pi pi-trash"
              severity="danger"
              [text]="true"
              (onClick)="deleteMember(member)">
            </p-button>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5" class="text-center">
            No members found
          </td>
        </tr>
      </ng-template>

    </p-table>
  </div>
</div>

<!-- Member Dialog -->
<p-dialog
  [visible]="memberDialog()"
  (visibleChange)="memberDialog.set($event)"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: '420px' }"
  [header]="isEditMode() ? 'Edit Member' : 'New Member'"
  styleClass="p-fluid">

  <ng-template pTemplate="content">

    <div class="field">
      <label>Book Name<span class="required-star">*</span></label>
      <input
        pInputText
        [(ngModel)]="member().bookname">
    </div>

    <div class="field">
      <label>Member Name<span class="required-star">*</span></label>
      <input
        pInputText
        [(ngModel)]="member().memberName">
    </div>

    <div class="field">
      <label>Age<span class="required-star">*</span></label>
      <p-inputNumber
        [(ngModel)]="member().memberAge">
      </p-inputNumber>
    </div>

  </ng-template>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancel"
      icon="pi pi-times"
      [text]="true"
      (onClick)="hideDialog()">
    </p-button>

    <p-button
      label="Save"
      icon="pi pi-check"
      (onClick)="saveMember()">
    </p-button>
  </ng-template>
</p-dialog>


